{"ast":null,"code":"var _jsxFileName = \"/home/junaid_dev/djangoproj/frontend/src/components/TweetComposer.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TweetComposer = ({\n  username\n}) => {\n  _s();\n  // Receive username as a prop\n  const [tweetContent, setTweetContent] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [tweets, setTweets] = useState([]);\n  useEffect(() => {\n    fetchTweets();\n  }, []);\n  const fetchTweets = async () => {\n    try {\n      const response = await axios.get(\"http://127.0.0.1:8000/tweets/\");\n      setTweets(response.data);\n    } catch (error) {\n      console.error(\"Error fetching tweets:\", error);\n    }\n  };\n  const handleInputChange = e => {\n    setTweetContent(e.target.value);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    try {\n      const token = localStorage.getItem(\"token\");\n\n      // Decode the token to extract user information (including the username)\n      const decodedToken = jwt_decode(token);\n      const username = decodedToken.username;\n      const response = await axios.post(`http://127.0.0.1:8000/tweets/${username}/`, {\n        content: tweetContent\n      });\n      console.log(\"Tweet created:\", response.data);\n      setTweets([...tweets, response.data]); // Add newly created tweet to the list\n    } catch (error) {\n      console.error(\"Error creating tweet:\", error);\n      setError(\"An error occurred while creating the tweet.\");\n    } finally {\n      setLoading(false);\n      setTweetContent(\"\");\n    }\n  };\n  const handleDelete = async id => {\n    try {\n      await axios.delete(`http://127.0.0.1:8000/tweets/${id}/`);\n      setTweets(tweets.filter(tweet => tweet.id !== id)); // Remove the deleted tweet from the list\n    } catch (error) {\n      console.error(\"Error deleting tweet:\", error);\n    }\n  };\n  const handleLike = async id => {\n    try {\n      await axios.put(`http://127.0.0.1:8000/tweets/${id}/like/`);\n      const updatedTweets = tweets.map(tweet => {\n        if (tweet.id === id) {\n          return {\n            ...tweet,\n            is_liked: !tweet.is_liked\n          };\n        }\n        return tweet;\n      });\n      setTweets(updatedTweets);\n    } catch (error) {\n      console.error(\"Error liking tweet:\", error);\n    }\n  };\n  const handleFollow = async userId => {\n    try {\n      // Implement follow functionality\n      // You need to send a request to your backend to follow the user with the given userId\n    } catch (error) {\n      console.error(\"Error following user:\", error);\n    }\n  };\n  const handleComment = async id => {\n    try {\n      // Implement comment functionality\n      // You need to navigate to a separate page or modal to add comments to the tweet with the given id\n    } catch (error) {\n      console.error(\"Error commenting on tweet:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"tweet\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Compose a Tweet\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: tweetContent,\n        onChange: handleInputChange,\n        placeholder: \"What's happening?\",\n        rows: 4,\n        cols: 50,\n        disabled: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"post\",\n        type: \"submit\",\n        disabled: loading,\n        children: loading ? \"Posting...\" : \"Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Tweets\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: tweets.map(tweet => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: tweet.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(tweet.id),\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleLike(tweet.id),\n            children: tweet.is_liked ? 'Unlike' : 'Like'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleFollow(tweet.user.id),\n            children: \"Follow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleComment(tweet.id),\n            children: \"Comment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }, this)\n      }, tweet.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n};\n_s(TweetComposer, \"/8RepeOtlVioDPND2A3kkj23gnM=\");\n_c = TweetComposer;\nexport default TweetComposer;\nvar _c;\n$RefreshReg$(_c, \"TweetComposer\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","TweetComposer","username","_s","tweetContent","setTweetContent","loading","setLoading","error","setError","tweets","setTweets","fetchTweets","response","get","data","console","handleInputChange","e","target","value","handleSubmit","preventDefault","token","localStorage","getItem","decodedToken","jwt_decode","post","content","log","handleDelete","id","delete","filter","tweet","handleLike","put","updatedTweets","map","is_liked","handleFollow","userId","handleComment","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","onChange","placeholder","rows","cols","disabled","type","onClick","user","_c","$RefreshReg$"],"sources":["/home/junaid_dev/djangoproj/frontend/src/components/TweetComposer.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nconst TweetComposer = ({ username }) => { // Receive username as a prop\n  const [tweetContent, setTweetContent] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [tweets, setTweets] = useState([]);\n\n  useEffect(() => {\n    fetchTweets();\n  }, []);\n\n  const fetchTweets = async () => {\n    try {\n      const response = await axios.get(\"http://127.0.0.1:8000/tweets/\");\n      setTweets(response.data);\n    } catch (error) {\n      console.error(\"Error fetching tweets:\", error);\n    }\n  };\n\n  const handleInputChange = (e) => {\n    setTweetContent(e.target.value);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    try {\n      const token = localStorage.getItem(\"token\");\n\n    // Decode the token to extract user information (including the username)\n    const decodedToken = jwt_decode(token);\n    const username = decodedToken.username;\n      const response = await axios.post(`http://127.0.0.1:8000/tweets/${username}/`, {\n        content: tweetContent,\n      });\n      console.log(\"Tweet created:\", response.data);\n      setTweets([...tweets, response.data]); // Add newly created tweet to the list\n    } catch (error) {\n      console.error(\"Error creating tweet:\", error);\n      setError(\"An error occurred while creating the tweet.\");\n    } finally {\n      setLoading(false);\n      setTweetContent(\"\");\n    }\n  };\n\n  const handleDelete = async (id) => {\n    try {\n      await axios.delete(`http://127.0.0.1:8000/tweets/${id}/`);\n      setTweets(tweets.filter(tweet => tweet.id !== id)); // Remove the deleted tweet from the list\n    } catch (error) {\n      console.error(\"Error deleting tweet:\", error);\n    }\n  };\n\n  const handleLike = async (id) => {\n    try {\n      await axios.put(`http://127.0.0.1:8000/tweets/${id}/like/`);\n      const updatedTweets = tweets.map(tweet => {\n        if (tweet.id === id) {\n          return { ...tweet, is_liked: !tweet.is_liked };\n        }\n        return tweet;\n      });\n      setTweets(updatedTweets);\n    } catch (error) {\n      console.error(\"Error liking tweet:\", error);\n    }\n  };\n\n  const handleFollow = async (userId) => {\n    try {\n      // Implement follow functionality\n      // You need to send a request to your backend to follow the user with the given userId\n    } catch (error) {\n      console.error(\"Error following user:\", error);\n    }\n  };\n\n  const handleComment = async (id) => {\n    try {\n      // Implement comment functionality\n      // You need to navigate to a separate page or modal to add comments to the tweet with the given id\n    } catch (error) {\n      console.error(\"Error commenting on tweet:\", error);\n    }\n  };\n\n  return (\n    <div className=\"tweet\">\n      <h2>Compose a Tweet</h2>\n      <form onSubmit={handleSubmit}>\n        <textarea\n          value={tweetContent}\n          onChange={handleInputChange}\n          placeholder=\"What's happening?\"\n          rows={4}\n          cols={50}\n          disabled={loading}\n        />\n        <button className=\"post\" type=\"submit\" disabled={loading}>\n          {loading ? \"Posting...\" : \"Post\"}\n        </button>\n      </form>\n      {error && <p>{error}</p>}\n      <h2>Tweets</h2>\n      <ul>\n        {tweets.map((tweet) => (\n          <li key={tweet.id}>\n            <div>\n              <span>{tweet.content}</span>\n              <button onClick={() => handleDelete(tweet.id)}>Delete</button>\n              <button onClick={() => handleLike(tweet.id)}>{tweet.is_liked ? 'Unlike' : 'Like'}</button>\n              <button onClick={() => handleFollow(tweet.user.id)}>Follow</button>\n              <button onClick={() => handleComment(tweet.id)}>Comment</button>\n            </div>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default TweetComposer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}